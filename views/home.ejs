<!DOCTYPE html>
<html lang="en">
  <head>
	<% include partials/page/head.ejs %>
  </head>
  <body>
	<% include partials/page/header.ejs %>
  	<div class="container">
  		<div class="row">
  			<div class="col-md-12">
          <% if (message.length > 0) { %>
          <div class="alert alert-success alert-wahi"><%= message %></div>
          <% } %>

  				<h1><%=title %></h1>

          <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
          <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true&key=AIzaSyAK6mYhbwDDfsKBx5V_ywq8Nb8gCOggv5c"></script>
          <script type="text/javascript" src="js/gmaps.js"></script>
          <script type="text/javascript">
            var map;
            var rowsmap = <%- JSON.stringify(rows) %>;
            $(document).ready(function(){
              map = new GMaps({
                el: '#map',
                zoom: 8,
                lat: rowsmap[0].latTo,
                lng: rowsmap[0].lonTo
              });
              var rows = <%- JSON.stringify(rows) %>;
              for (var i = 0, len = rows.length; i < len; i++) {
                  map.addMarker({
                    lat: rows[i].latTo,
                    lng: rows[i].lonTo,
                    title: rows[i].toCity,
                    infoWindow: {
                      content: '<p style="color: black;">Start: '+rows[i].fromCity+' <br/> Ziel: '+rows[i].toCity+'</p>'
                    }
                  });
              }
            });
        </script>
        <div class="content__detailview">
            <div class="content__detailview-map" id="map"></div>
        </div>
  				
         <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                      <th></th>
                        <th>Datum</th>
                        <th>Schritte</th>
                        <th>von (Stadt)</th>
                        <th>bis (Stadt)</th>
                        <th>bis (Land)</th>
                        <th>Richtung</th>
                        <th>Text</th>
                    </tr>
                </thead>
                <tbody>
                  <% for(var i=0; i<rows.length; i++) { %>
                    <tr>
                        <td><a class="btn btn-wahi btn-sm" href="/home/show/<%= rows[i].id %>">Details</a></td>
                        <td> 23.12.2016</td>
                        <td><%= rows[i].steps %></td>
                        <td><%= rows[i].fromCity %></td>
                        <td><%= rows[i].toCity %></td>
                        <td><%= rows[i].toCountry %></td>
                        <td><%= rows[i].direction %></td>
                        <td><%= rows[i].infoText %></td>
                     </tr>
                  <% } %>
                </tbody>
            </table>
          </div>

  		</div>
		</div>
	</div>


	<% include partials/page/footer.ejs %>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  </body>
</html>